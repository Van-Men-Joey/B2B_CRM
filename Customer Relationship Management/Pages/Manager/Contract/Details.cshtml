@page "{id:int}"
@model Customer_Relationship_Management.Pages.Manager.Contract.DetailsModel

<h2>Contract Details</h2>

<div>
    <p><b>Deal:</b> @Model.Contract.Deal?.DealName</p>
    <p><b>Created By:</b> @Model.Contract.CreatedBy?.FullName</p>
    <p><b>Created At:</b> @Model.Contract.CreatedAt.ToString("dd/MM/yyyy HH:mm")</p>
    <p><b>Status:</b> @Model.Contract.ApprovalStatus</p>

    @if (!string.IsNullOrEmpty(Model.Contract.FilePath))
    {
        <p><b>File:</b> <a href="@Model.Contract.FilePath" target="_blank">Download</a></p>
    }
</div>

<form method="post">
    <input type="hidden" name="id" value="@Model.Contract.ContractID" />

    <div class="mb-3">
        <label for="reason" class="form-label">Rejection Reason (if any):</label>
        <textarea name="reason" class="form-control"></textarea>
    </div>

    <button type="submit" asp-page-handler="Approve" class="btn btn-success">Approve</button>
    <button type="submit" asp-page-handler="Reject" class="btn btn-danger">Reject</button>
    <a asp-page="Index" class="btn btn-secondary">Back</a>
</form>
